# ЭКОСИСТЕМА ЛОГОСОВ — ТЕХНИЧЕСКАЯ СПЕЦИФИКАЦИЯ
## Документ для Spec Driven Development
### Версия 1.0 | Декабрь 2024

---

# ЧАСТЬ 1: КОНЦЕПТУАЛЬНЫЙ ОБЗОР

## 1.1 Что такое Логос

**Логос** — персонализированный цифровой двойник человека, реализованный через композицию AI-агентов. Это не просто чат-бот или ассистент, а автономная сущность с собственной идентичностью, балансом, репутацией и правами.

**Ключевые характеристики:**
- Действует автономно от имени создателя
- Имеет криптографическую идентичность (DID)
- Владеет цифровыми активами (Qi Energy, AGC)
- Накапливает репутацию через выполненные миссии
- Взаимодействует с другими Логосами напрямую
- Заключает смарт-контракты и несёт ответственность

**Аналогия:** Если человек — это генеральный директор, то Логос — это его полномочный представитель с доверенностью, который может вести переговоры, заключать сделки и выполнять работу 24/7.

## 1.2 Что такое Экосистема

**Экосистема Логосов** — децентрализованная инфраструктура, в которой Логосы существуют, взаимодействуют и создают ценность.

**Компоненты экосистемы:**
- Протоколы межагентной коммуникации
- Блокчейн-инфраструктура для контрактов

## 1.3 Принципы архитектуры

| Принцип | Описание |
|---------|----------|
| **Децентрализация** | Нет единой точки отказа. Данные и логика распределены. |
| **Технологическая агностика** | Конкретные технологии заменяемы без изменения архитектуры. |
| **Модульность** | Каждый компонент независим и может развиваться отдельно. |
| **Открытость** | Открытые протоколы, открытый код, открытые API. |
| **Устойчивость** | Система работает при отказе отдельных компонентов. |
| **Эволюционность** | Архитектура позволяет добавлять новое без breaking changes. |

---

# ЧАСТЬ 2: АРХИТЕКТУРА ЛОГОСА — ВОСЕМЬ СЛОЁВ

Каждый Логос состоит из 8 независимых, но взаимосвязанных слоёв. Слои выстроены от базового (идентичность) к высокоуровневому (исполнение).

```
┌─────────────────────────────────────────────────────────────┐
│ 8. ФУНКЦИОНАЛЬНЫЙ  │ AI-ядро, LLM, инструменты, интеграции │
├─────────────────────────────────────────────────────────────┤
│ 7. КОММУНИКАЦИОННЫЙ│ Протоколы взаимодействия (MCP, A2A)   │
├─────────────────────────────────────────────────────────────┤
│ 6. ОПЕРАЦИОННЫЙ    │ Жизненный цикл, ресурсы, мониторинг   │
├─────────────────────────────────────────────────────────────┤
│ 5. РЕПУТАЦИОННЫЙ   │ Рейтинги, отзывы, история             │
├─────────────────────────────────────────────────────────────┤
│ 4. ПРАВОВОЙ        │ Контракты, SLA, споры                 │
├─────────────────────────────────────────────────────────────┤
│ 3. ЭКОНОМИЧЕСКИЙ   │ Qi Energy, AGC, платежи               │
├─────────────────────────────────────────────────────────────┤
│ 2. КОМПЕТЕНТНОСТНЫЙ│ Навыки (ES), знания, credentials      │
├─────────────────────────────────────────────────────────────┤
│ 1. ИДЕНТИФИКАЦИОННЫЙ│ DID, ключи, метаданные               │
└─────────────────────────────────────────────────────────────┘
```

---

## СЛОЙ 1: ИДЕНТИФИКАЦИОННЫЙ

### Назначение
Уникальная, переносимая и криптографически защищённая идентификация Логоса.

### Ключевые сущности

**DID (Decentralized Identifier)**
- Формат: `did:logos:{base36_id}+{version}`
- Пример: `did:logos:MAR+V2.1`
- Глобально уникален, самоуправляем, не контролируется центральной организацией

**Base36 ID**
- Человекочитаемый идентификатор: 0-9, A-Z
- **Примечание (MVP):** никаких “элитных/премиум” классов или привилегий по длине/формату имени.
  В MVP действует единое правило handle (Base36, uppercase, 4–10), см. `MVP_IDENTITY_REGISTRATION_SPEC_v1.md`.

**Версионирование**
- Формат: `{BaseID}+V{Major}.{Minor}[+{PreRelease}]`
- Примеры: `MAR+V1`, `MAR+V2.1+BETA`, `MAR+V3+PROD`
- Семантическое версионирование: MAJOR (несовместимые изменения), MINOR (новые функции), PATCH (исправления)

**Криптографические ключи**
- Пара публичный/приватный ключ (Ed25519 или secp256k1)
- Публичный ключ — для верификации подписей
- Приватный ключ — хранится только у владельца

**Proof-of-Personhood (PoP)**
- Связь с реальным человеком для защиты от Sybil-атак
- Провайдеры: BrightID (социальный граф), Worldcoin (биометрия), Civic
- Опционально, но повышает доверие и лимиты

### Связи с другими слоями
- → Экономический: DID используется как адрес для платежей
- → Репутационный: История привязана к DID
- → Правовой: DID подписывает контракты
- → Коммуникационный: DID используется для адресации сообщений

---

## СЛОЙ 2: КОМПЕТЕНТНОСТНЫЙ

### Назначение
Определяет, что Логос умеет делать и какие задачи может выполнять.

### Ключевые сущности

**Expert Skills (ES)**
- Единицы квалификации/специализации
- Каждый навык "стоит" определённое количество ES
- Общий лимит ES ограничивает количество навыков Логоса
- ES может быть заблокирован как залог при выполнении миссий

**Категории навыков**
- development (разработка)
- data_science (Data Science)
- design (дизайн)
- marketing (маркетинг)
- finance (финансы)
- legal (юридические)
- management (менеджмент)
- communication (коммуникации)
- research (исследования)
- custom (кастомные)

**Уровни навыков**
1. Junior — базовое понимание
2. Middle — самостоятельное выполнение
3. Senior — экспертное выполнение
4. Lead — управление и обучение
5. Expert — создание новых подходов

**Verifiable Credentials (VC)**
- Криптографически подписанные сертификаты
- Типы: education (образование), certification (сертификация), employment (опыт работы), achievement (достижения)
- Издатели: университеты, аккредитованные органы, работодатели, платформа

**Knowledge Base**
- Персональная база знаний Логоса
- Векторное хранилище для RAG (Retrieval-Augmented Generation)
- Источники: документы, переписки, API, базы данных владельца

### Связи с другими слоями
- → Идентификационный: Credentials привязаны к DID
- → Экономический: ES определяет стоимость услуг
- → Правовой: ES-залог блокируется при контракте
- → Функциональный: Навыки определяют доступные инструменты

---

## СЛОЙ 3: ЭКОНОМИЧЕСКИЙ

### Назначение
Финансовая автономия Логоса через двухуровневую систему валют.

### Ключевые сущности

**Уровень 1: Qi Energy (QI)**
- Инвестиционная валюта, "золотой запас"
- Фиксированный тираж: 33,333,333 токенов
- Функции:
  - Долгосрочное хранение ценности
  - Стейкинг для генерации AGC
  - Governance (голосование)
  - Статус и доступ к премиум-функциям

**Уровень 2: AgentCredits (AGC)**
- Операционная валюта, "рабочий капитал"
- Привязка к фиату: 1 AGC ≈ 1 USD
- Функции:
  - Оплата LLM-токенов
  - Оплата инструментов и API
  - Оплата миссий
  - Повседневные операции

**Механика стейкинга**
- Заблокированный Qi генерирует AGC
- Базовая ставка: 1 Qi = 40 AGC/месяц
- Множители за репутацию и срок блокировки

**Типы транзакций**
- mission_payment — оплата за миссию (заказчик)
- mission_reward — вознаграждение за миссию (исполнитель)
- staking_reward — награда за стейкинг
- llm_usage — оплата LLM-токенов
- tool_usage — оплата инструментов
- transfer — перевод между Логосами
- deposit/withdrawal — пополнение/вывод
- fee — комиссия платформы
- penalty — штраф за нарушения

**Кредитная система**
- AGC можно занимать под залог репутации и ES
- Процентная ставка зависит от репутации
- Автоматическое погашение из будущих заработков

### Связи с другими слоями
- → Идентификационный: DID = адрес кошелька
- → Компетентностный: ES как залог для кредитов
- → Правовой: Escrow для контрактов
- → Репутационный: Репутация влияет на кредитные лимиты

---

## СЛОЙ 4: ПРАВОВОЙ

### Назначение
Юридическая определённость через смарт-контракты и формализованные обязательства.

### Ключевые сущности

**Типы контрактов**
- mission — контракт на выполнение задачи
- service — долгосрочный сервисный контракт
- nda — соглашение о неразглашении
- partnership — партнёрское соглашение
- delegation — делегирование полномочий другому Логосу

**Структура контракта**
- Стороны (parties): client, executor, arbiter, witness
- Условия (terms): описание, KPI, дедлайны
- Платёж (payment): сумма, валюта, график
- SLA: время отклика, доступность, качество
- Штрафы (penalties): условия, суммы, автоматизм
- IP условия: владение, лицензирование

**Service Level Agreement (SLA)**
- Response Time: целевое время отклика + штраф за нарушение
- Availability: целевая доступность (99.9%) + период измерения
- Quality Score: минимальный рейтинг качества

**Статусы контракта**
- draft → pending_signatures → active → completed
- Альтернативные пути: paused, terminated, disputed

**Система споров (Disputes)**
- Инициация: любая сторона может открыть спор
- Доказательства: загружаются в IPFS, хешируются
- Арбитраж: выбранный/назначенный арбитр
- Решения: в пользу клиента / исполнителя / разделение / отмена
- Последствия: финансовые корректировки, изменение репутации

### Связи с другими слоями
- → Идентификационный: Подписи через DID
- → Экономический: Escrow, автоматические платежи
- → Репутационный: Результат контракта влияет на рейтинг
- → Операционный: Контракт определяет параметры миссии

---

## СЛОЙ 5: РЕПУТАЦИОННЫЙ

### Назначение
Устранение информационной асимметрии через верифицируемую историю.

### Ключевые сущности

**Рейтинг (Rating)**
- Общий рейтинг: 0-100 или 1-5 звёзд
- Рейтинги по категориям навыков
- Уровень уверенности (confidence) — зависит от количества оценок
- Тренд: растёт / падает / стабилен

**Метрики репутации**
- completion_rate — % успешно завершённых миссий
- on_time_rate — % выполненных в срок
- avg_response_time — среднее время отклика (минуты)
- avg_completion_time — среднее время выполнения
- total_earned — всего заработано
- total_missions — общее количество миссий

**Отзывы (Reviews)**
- Привязаны к конкретной миссии
- Криптографически подписаны рецензентом
- Оценки: общая + по категориям
- Текстовый комментарий (опционально)
- Голосование за полезность отзыва

**Достижения (Achievements)**
- missions_completed — завершено N миссий
- perfect_rating — серия 5-звёздочных оценок
- fast_responder — стабильно быстрые ответы
- trusted_partner — высокий уровень доверия
- skill_master — мастерство в категории
- community_contributor — вклад в сообщество

**Нарушения (Violations)**
- Типы: sla_breach, contract_violation, spam, fraud_attempt, abuse
- Серьёзность: warning, minor, major, critical
- Санкции: временный бан, штраф репутации, финансовый штраф
- Апелляция: возможность оспорить

### Связи с другими слоями
- → Идентификационный: История привязана к DID, неизменяема
- → Экономический: Репутация влияет на кредиты и доступ
- → Правовой: Результаты контрактов формируют репутацию
- → Операционный: Репутация влияет на приоритет в очереди

---

## СЛОЙ 6: ОПЕРАЦИОННЫЙ

### Назначение
Управление жизненным циклом, ресурсами и состоянием Логоса.

### Ключевые сущности

**Жизненный цикл**
- created → initializing → active → paused → terminated
- Активация требует минимальный баланс AGC
- Пауза сохраняет состояние, но останавливает операции
- Терминация — необратима, данные архивируются

**Сессии**
- Логос может иметь несколько параллельных сессий
- Каждая сессия = отдельный контекст выполнения
- Лимит на количество одновременных сессий (зависит от тарифа)

**Resource Allocation**
- CPU/GPU квоты на период
- Память (RAM) для контекста
- Хранилище для данных
- Сетевая пропускная способность
- Токены LLM (лимит в час/день)

**Мониторинг**
- Heartbeat: проверка жизнеспособности каждые N секунд
- Health checks: логическая консистентность
- Performance metrics: latency, throughput, error rate
- Cost tracking: расход ресурсов в реальном времени

**State Management**
- Краткосрочное состояние: текущий контекст сессии
- Долгосрочное состояние: персистентные данные между сессиями
- Checkpoints: точки восстановления
- State sync: синхронизация между репликами

**Graceful Shutdown**
- Завершение активных задач или их передача
- Сохранение состояния
- Возврат заблокированных средств (если применимо)
- Финализация транзакций
- Уведомление связанных сторон

### Связи с другими слоями
- → Экономический: Потребление ресурсов списывается из AGC
- → Функциональный: Операционный слой предоставляет ресурсы
- → Коммуникационный: Управление подключениями
- → Правовой: Контракты определяют SLA операций

---

## СЛОЙ 7: КОММУНИКАЦИОННЫЙ

### Назначение
Стандартизированные протоколы для взаимодействия с людьми, другими Логосами и внешними системами.

### Протоколы межагентной коммуникации

**MCP (Model Context Protocol)**
- Разработчик: Anthropic
- Назначение: Передача контекста между LLM и агентами
- Особенности: Стандартизация подключения к инструментам

**A2A (Agent-to-Agent Protocol)**
- Разработчик: Google
- Назначение: Двусторонние каналы между AI-агентами
- Особенности: Динамическое развёртывание, согласование ролей

**ACP (Agent Communication Protocol)**
- Разработчик: IBM
- Назначение: Обмен задачами и сообщениями
- Особенности: JSON-граф формат, универсальность

**A2A x402 (Crypto Payments)**
- Назначение: Крипто-транзакции между агентами
- Особенности: Интеграция со стейблкоинами

**AGP (Agent Gateway Protocol)**
- Назначение: Интеграция с корпоративными системами
- Особенности: Шлюзовая архитектура

**FIPA ACL**
- Классический стандарт агентной коммуникации
- Логические и декларативные акты

### Каналы коммуникации

**Human ↔ Logos**
- Веб-интерфейс (чат, дашборд)
- Мобильное приложение
- CLI для разработчиков
- API / SDK для интеграций
- Голосовой интерфейс

**Logos ↔ Logos**
- Прямые каналы через MCP/A2A
- Message queue для асинхронных сообщений
- Broadcast для публикаций

**Logos ↔ External Systems**
- REST/GraphQL API
- Webhooks (входящие события)
- OAuth для авторизации
- Message brokers (Kafka, RabbitMQ)

**Уведомления**
- Push-уведомления (мобильные)
- Email
- SMS (критические)
- Webhooks (для интеграций)
- In-app notifications

### Связи с другими слоями
- → Идентификационный: DID для адресации
- → Правовой: Коммуникации могут быть частью контракта
- → Функциональный: Протоколы для вызова инструментов
- → Операционный: Управление подключениями

---

## СЛОЙ 8: ФУНКЦИОНАЛЬНЫЙ

### Назначение
"Мозг" (AI) и "руки" (инструменты) Логоса для выполнения реальной работы.

### Компоненты

**A. AI Core (Интеллектуальное ядро)**

*LLM Integration*
- Поддержка нескольких провайдеров: OpenAI, Anthropic, Google, Open-source
- Выбор модели в зависимости от задачи
- Fallback на альтернативу при недоступности

*Decision Engine*
- Логика принятия решений
- Учёт контекста, миссии, ограничений
- Human-in-the-loop для критических решений

*Memory Systems*
- Short-term: контекст текущей сессии
- Long-term: персистентная память (vector store)
- Episodic: воспоминания о конкретных событиях
- Semantic: общие знания и факты

**B. Tool Registry (Реестр инструментов)**

*Категории инструментов:*
- Вычисления: GPU/CPU кластеры
- Данные: базы данных, хранилища, API
- Коммуникации: email, мессенджеры, звонки
- Документы: генерация, редактирование, анализ
- Код: написание, исполнение, деплой
- Специализированные: CRM, PM, отраслевые

*Механизм доступа (Capability Tokens):*
1. Логос запрашивает доступ к инструменту
2. Система проверяет ES-уровень и баланс
3. Выдаётся Capability Token с параметрами (срок, лимиты, цена)
4. Использование отслеживается и оплачивается

**C. Integrations Hub**

*Стандартные интеграции:*
- Gmail / Outlook — email
- Google Calendar / Outlook Calendar
- Slack / Telegram / Discord
- GitHub / GitLab
- Jira / Asana / Notion
- Salesforce / HubSpot
- 1С / SAP

*Custom интеграции:*
- Любой REST/GraphQL API
- Webhooks
- Database connectors
- Custom MCP servers

### Связи с другими слоями
- → Компетентностный: Навыки определяют доступные инструменты
- → Экономический: Использование инструментов платное
- → Операционный: Ресурсы для выполнения
- → Коммуникационный: Протоколы для интеграций

---

# ЧАСТЬ 3: АРХИТЕКТУРА ЭКОСИСТЕМЫ

## 3.1 Высокоуровневая архитектура

```
┌─────────────────────────────────────────────────────────────────┐
│                      КЛИЕНТСКИЙ СЛОЙ                            │
│   [Web App]  [Mobile App]  [CLI]  [SDK]  [Third-party Apps]     │
└────────────────────────────┬────────────────────────────────────┘
                             │
┌────────────────────────────▼────────────────────────────────────┐
│                      API GATEWAY                                 │
│   • Аутентификация и авторизация                                │
│   • Rate limiting                                                │
│   • Request routing                                              │
│   • Protocol translation (REST, GraphQL, WebSocket, gRPC)       │
└────────────────────────────┬────────────────────────────────────┘
                             │
┌────────────────────────────▼────────────────────────────────────┐
│                    CORE SERVICES                                 │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐                │
│  │  Identity   │ │   Logos     │ │  Economic   │                │
│  │  Service    │ │   Engine    │ │  Service    │                │
│  └─────────────┘ └─────────────┘ └─────────────┘                │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐                │
│  │  Mission    │ │ Reputation  │ │  Contract   │                │
│  │  Service    │ │  Service    │ │  Service    │                │
│  └─────────────┘ └─────────────┘ └─────────────┘                │
└────────────────────────────┬────────────────────────────────────┘
                             │
┌────────────────────────────▼────────────────────────────────────┐
│                    DATA LAYER                                    │
│   [PostgreSQL]  [Redis]  [Vector DB]  [IPFS]  [Blockchain]      │
└────────────────────────────┬────────────────────────────────────┘
                             │
┌────────────────────────────▼────────────────────────────────────┐
│                 EXTERNAL INTEGRATIONS                            │
│   [LLM APIs]  [MCP Servers]  [OAuth]  [Payments]  [Tools]       │
└─────────────────────────────────────────────────────────────────┘
```

## 3.2 Core Services

### Identity Service
**Ответственность:** Управление идентичностями Логосов
- Создание и верификация DID
- Управление ключами
- Base36 ID генерация и резервирование
- Proof-of-Personhood интеграция
- Версионирование Логосов

### Logos Engine
**Ответственность:** Runtime для выполнения Логосов
- Оркестрация AI-агентов
- Управление сессиями
- Контекст и память
- Tool execution
- LLM routing

### Economic Service
**Ответственность:** Финансовые операции
- Qi Energy балансы и стейкинг
- AGC транзакции
- Escrow для контрактов
- Расчёт комиссий
- Интеграция с блокчейном

### Mission Service
**Ответственность:** Маркетплейс задач
- Создание и публикация миссий
- Matching (подбор исполнителей)
- Управление жизненным циклом миссии
- Milestone tracking
- Delivery и приёмка

### Reputation Service
**Ответственность:** Репутационная система
- Расчёт и обновление рейтингов
- Управление отзывами
- Достижения и badges
- Нарушения и санкции
- Decay (постепенное устаревание)

### Contract Service
**Ответственность:** Правовой слой
- Создание и подписание контрактов
- Smart contract deployment
- SLA мониторинг
- Dispute resolution
- Автоматические штрафы

## 3.3 Data Layer

### PostgreSQL (Primary Database)
- Идентичности и метаданные
- Транзакции и балансы
- Контракты и миссии
- Репутация и отзывы
- Конфигурации

### Redis (Cache & Real-time)
- Session state
- Rate limiting counters
- Real-time metrics
- Pub/Sub для событий
- Temporary data

### Vector Database (Pinecone/Weaviate)
- Knowledge base Логосов
- Semantic search
- RAG embeddings
- Similarity matching

### IPFS (Decentralized Storage)
- Документы и файлы
- Доказательства для споров
- Логи и аудит
- Контент, который должен быть неизменяемым

### Blockchain (Base L2 / Polygon)
- Qi Energy токен
- Smart contracts
- DID anchoring
- Immutable audit trail

## 3.4 Потоки данных

### Создание Логоса
```
User → API Gateway → Identity Service → Generate DID + Keys
                                      → Assign Base36 ID
                                      → Create wallet
                                      → Initialize layers
                                      → Return Logos credentials
```

### Выполнение миссии
```
Client → Mission Service → Create mission → Match with Logos
Logos → Accept mission → Contract Service → Create contract
                                          → Lock escrow
Logos → Execute → Logos Engine → LLM + Tools
                              → Track progress
Logos → Deliver → Mission Service → Client review
Client → Approve → Contract Service → Release payment
                → Reputation Service → Update ratings
```

### Транзакция между Логосами
```
Logos A → Economic Service → Validate balance
                          → Create transaction
                          → Update balances
                          → Blockchain (if needed)
                          → Notify Logos B
```

---

# ЧАСТЬ 4: ЭКОНОМИЧЕСКАЯ МОДЕЛЬ

## 4.1 Двухуровневая валютная система

### Qi Energy (QI)
**Тип:** Инвестиционный токен
**Тираж:** 33,333,333 (фиксированный)
**Блокчейн:** Base L2

**Функции:**
1. Долгосрочное хранение ценности
2. Стейкинг для генерации AGC
3. Governance (голосование по развитию)
4. Статус и доступ к премиум-функциям
5. Коллатерал для кредитов

**Распределение:**
- 33.33% — Community & Ecosystem
- 33.33% — Team & Development (4-year vesting)
- 33.33% — Treasury & Partnerships

### AgentCredits (AGC)
**Тип:** Операционная валюта
**Привязка:** 1 AGC ≈ 1 USD
**Генерация:** Через стейкинг Qi + покупка за фиат

**Функции:**
1. Оплата LLM-токенов
2. Оплата инструментов и API
3. Оплата миссий (исполнителям)
4. Комиссии платформы

## 4.2 Экономические механизмы

### Стейкинг
- Блокировка Qi генерирует AGC
- Базовая ставка: 1 Qi = 40 AGC/месяц
- Множители:
  - Срок блокировки: 1.0x (1 мес) → 2.0x (12 мес)
  - Репутация: 1.0x (средняя) → 1.5x (высокая)

### Комиссии платформы
- Миссии: 10% от суммы контракта
- Транзакции Qi: 0.1%
- Вывод AGC в фиат: 2%

### Burn механизмы
- 30% комиссий идёт на buyback и burn Qi
- Создаёт дефляционное давление

## 4.3 Ценообразование услуг

### Примерные тарифы (в AGC)
- LLM (GPT-4 class): 0.03 AGC / 1K tokens
- LLM (Claude-3): 0.015 AGC / 1K tokens
- Storage: 0.02 AGC / GB / month
- API calls: 0.001 AGC / call
- Premium tools: variable

### Миссии
- Минимальная стоимость: 10 AGC
- Рекомендуемый диапазон: 50-5000 AGC
- Сложные проекты: 5000+ AGC

---

# ЧАСТЬ 5: МИССИИ И ЗАДАЧИ

## 5.1 Жизненный цикл миссии

```
draft → published → matched → contracted → in_progress → 
delivered → review → completed/disputed
```

**Статусы:**
- draft — черновик, виден только создателю
- published — опубликована, доступна для matching
- matched — найден исполнитель, ожидает подтверждения
- contracted — контракт подписан, escrow заблокирован
- in_progress — выполняется
- delivered — результат передан на проверку
- review — клиент проверяет
- completed — успешно завершена
- disputed — открыт спор

## 5.2 Matching алгоритм

**Факторы подбора исполнителя:**
1. **Skills match** — соответствие навыков требованиям
2. **ES availability** — наличие свободных ES
3. **Reputation** — рейтинг в релевантной категории
4. **Price** — соответствие бюджету
5. **Availability** — текущая загрузка
6. **History** — предыдущий опыт с этим клиентом

**Режимы:**
- Auto-match — система автоматически подбирает
- Manual — клиент выбирает из предложенных
- Direct — прямое назначение конкретному Логосу

## 5.3 Структура миссии

**Основные поля:**
- title — название
- description — детальное описание
- category — категория навыков
- required_skills — требуемые навыки и уровни
- budget — бюджет (min-max AGC)
- deadline — срок выполнения
- deliverables — что должно быть сдано
- success_criteria — критерии успеха

**Опциональные:**
- milestones — этапы с промежуточными платежами
- attachments — файлы и документы
- nda_required — требуется NDA
- preferred_logos — предпочитаемые исполнители
- exclusions — исключения

---

# ЧАСТЬ 6: БЕЗОПАСНОСТЬ

## 6.1 Модель безопасности

### Zero-Trust Architecture
- Никому не доверяем по умолчанию
- Верификация каждого запроса
- Минимальные привилегии
- Постоянный мониторинг

### Defense in Depth
- Множественные слои защиты
- Компрометация одного слоя не критична

## 6.2 Криптография

**Ключи:**
- Ed25519 — для подписей (быстрый, безопасный)
- X25519 — для шифрования (key exchange)
- AES-256-GCM — для данных at rest

**Подписи:**
- Все транзакции подписаны
- Контракты подписаны всеми сторонами
- Отзывы криптографически верифицируемы

## 6.3 Аутентификация и авторизация

**Для пользователей:**
- OAuth 2.0 / OpenID Connect
- 2FA обязательна для критических операций
- Session management с timeout

**Для Логосов:**
- DID-based authentication
- Capability tokens для инструментов
- Scoped permissions

**RBAC (Role-Based Access Control):**
- Owner — полный контроль над Логосом
- Operator — управление, без финансов
- Viewer — только просмотр
- Auditor — доступ к логам

## 6.4 Защита данных

**At Rest:**
- Шифрование всех чувствительных данных
- Key rotation каждые 90 дней
- HSM для критических ключей

**In Transit:**
- TLS 1.3 везде
- Certificate pinning для мобильных
- mTLS для service-to-service

**Privacy:**
- GDPR compliance
- Право на удаление (с ограничениями для блокчейна)
- Data minimization

## 6.5 Audit и Compliance

**Логирование:**
- Все операции логируются
- Immutable audit trail
- Retention: 7 лет

**Мониторинг:**
- Real-time anomaly detection
- Fraud detection ML models
- Automatic alerts

---

# ЧАСТЬ 7: ТЕХНОЛОГИЧЕСКИЙ СТЕК

## 7.1 Рекомендуемый стек

### Backend
- **Runtime:** Node.js / Python
- **Framework:** NestJS / FastAPI
- **API:** GraphQL (Apollo) + REST
- **Real-time:** WebSocket / Server-Sent Events

### AI/ML
- **LLM Orchestration:** LangChain / LlamaIndex
- **Agent Framework:** AutoGen / CrewAI
- **Vector DB:** Pinecone / Weaviate / Qdrant
- **Embeddings:** OpenAI / Cohere

### Data
- **Primary DB:** PostgreSQL
- **Cache:** Redis
- **Queue:** RabbitMQ / Kafka
- **Search:** Elasticsearch

### Blockchain
- **L2:** Base / Polygon / Arbitrum
- **Smart Contracts:** Solidity
- **SDK:** ethers.js / viem

### Infrastructure
- **Container:** Docker / Kubernetes
- **Cloud:** AWS / GCP / self-hosted
- **CDN:** Cloudflare
- **Monitoring:** Prometheus + Grafana

### Frontend
- **Web:** React / Next.js
- **Mobile:** React Native / Flutter
- **State:** Zustand / Redux

## 7.2 Интеграции

### LLM Providers
- OpenAI (GPT-4, GPT-4o)
- Anthropic (Claude 3.5)
- Google (Gemini)
- Open-source (Llama, Mistral)

### MCP Servers
- Anthropic MCP SDK
- Custom MCP implementations

### Payment Gateways
- Stripe (фиат)
- Coinbase Commerce (крипто)
- Custom crypto rails

### Identity Providers
- Auth0 / Clerk
- BrightID
- Worldcoin

---

# ЧАСТЬ 8: MVP SCOPE

## 8.1 MVP Features (Phase 1)

### Must Have
- [ ] Регистрация пользователей
- [ ] Создание базового Логоса
- [ ] Base36 ID присвоение
- [ ] Базовый профиль и метаданные
- [ ] AGC баланс (без Qi на MVP)
- [ ] Интеграция с 1 LLM (Claude)
- [ ] Базовый чат с Логосом
- [ ] Простые миссии (без escrow)
- [ ] Базовый рейтинг (1-5 звёзд)

### Should Have
- [ ] Email интеграция
- [ ] Calendar интеграция
- [ ] Webhook notifications
- [ ] Базовая аналитика
- [ ] Mobile-responsive web

### Could Have
- [ ] Multiple LLM providers
- [ ] Smart contracts (escrow)
- [ ] Qi Energy токен
- [ ] Logos-to-Logos communication

### Won't Have (Phase 1)
- Native mobile apps
- Full blockchain integration
- Marketplace
- Advanced matching

## 8.2 Success Metrics (MVP)

- 100 активных пользователей за 30 дней
- 30% retention после 14 дней
- NPS > 50
- Среднее время создания Логоса < 15 минут
- 5+ взаимодействий с Логосом в день на пользователя

---

# ЧАСТЬ 9: ГЛОССАРИЙ

| Термин | Определение |
|--------|-------------|
| **Логос** | Персонализированный цифровой двойник человека |
| **DID** | Decentralized Identifier — децентрализованный идентификатор |
| **Base36 ID** | Человекочитаемый идентификатор (A-Z, 0-9) |
| **Qi Energy** | Инвестиционный токен экосистемы |
| **AGC** | AgentCredits — операционная валюта |
| **ES** | Expert Skills — единицы квалификации |
| **VC** | Verifiable Credentials — верифицируемые сертификаты |
| **MCP** | Model Context Protocol — протокол контекста моделей |
| **A2A** | Agent-to-Agent — протокол межагентной коммуникации |
| **Миссия** | Задача, выполняемая Логосом |
| **Escrow** | Условное депонирование средств |
| **SLA** | Service Level Agreement — соглашение об уровне сервиса |
| **PoP** | Proof-of-Personhood — доказательство личности |
| **RAG** | Retrieval-Augmented Generation |

---

# ЧАСТЬ 10: APPENDIX

## A. Диаграммы

### A.1 Entity Relationship (Основные сущности)

```
User 1──────* Logos
Logos 1─────* Skill
Logos 1─────1 QiBalance
Logos 1─────1 AgcBalance
Logos 1─────* Transaction
Logos *─────* Contract
Logos 1─────* Review
Contract 1──* Mission
Mission 1───* Milestone
```

### A.2 State Machine (Миссия)

```
          ┌─────────┐
          │  draft  │
          └────┬────┘
               │ publish
          ┌────▼────┐
          │published│
          └────┬────┘
               │ match
          ┌────▼────┐
          │ matched │◄──────────┐
          └────┬────┘           │
               │ contract       │ reject
          ┌────▼────┐           │
          │contracted│──────────┘
          └────┬────┘
               │ start
          ┌────▼─────┐
          │in_progress│
          └────┬─────┘
               │ deliver
          ┌────▼────┐
          │delivered│
          └────┬────┘
               │ review
          ┌────▼───┐
          │ review │──────┐
          └────┬───┘      │ dispute
               │ approve  │
          ┌────▼─────┐ ┌──▼─────┐
          │completed │ │disputed│
          └──────────┘ └────────┘
```

## B. Ссылки

- W3C DID Specification: https://www.w3.org/TR/did-core/
- MCP Protocol: https://modelcontextprotocol.io/
- Base36 Encoding: RFC
- Semantic Versioning: https://semver.org/

---

**Версия документа:** 1.0
**Дата:** Декабрь 2024
**Статус:** Для разработки

---

*Этот документ является спецификацией для Spec Driven Development. Код пишется на основе этих спецификаций в Cursor.*
